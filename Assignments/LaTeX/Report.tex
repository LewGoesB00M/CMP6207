% -------------------------------------------------------------------------------
% Establish page structure & font.
\documentclass[12pt]{report}

\usepackage[total={6.5in, 9in},
	left=1in,
	right=1in,
	top=1in,
	bottom=1in,]{geometry} % Page structure

\usepackage{graphicx} % Required for inserting images
\graphicspath{{../.images/}} % Any additional images I use (BCU logo, etc) are from here.

\usepackage[utf8]{inputenc} % UTF-8 encoding
\usepackage[T1]{fontenc} % T1 font
\usepackage{float}  % Allows for floats to be positioned using [H], which correctly
                    % positions them relative to their location within my LaTeX code.
\usepackage{subcaption}
\usepackage{csquotes}

% -------------------------------------------------------------------------------
% Declare biblatex with custom Harvard BCU styling for referencing.
\usepackage[
    useprefix=true,
    maxcitenames=3,
    maxbibnames=99,
    style=authoryear,
    dashed=false, 
    natbib=true,
    url=false,
    backend=biber
]{biblatex}

\usepackage[british]{babel}

% Additional styling options to ensure Harvard referencing format.
\renewbibmacro*{volume+number+eid}{
    \printfield{volume}
    \setunit*{\addnbspace}
    \printfield{number}
    \setunit{\addcomma\space}
    \printfield{eid}}
\DeclareFieldFormat[article]{number}{\mkbibparens{#1}}

\addbibresource{Report.bib}

% -------------------------------------------------------------------------------
% To prevent "Chapter N" display for each chapter
\usepackage[compact]{titlesec}
\usepackage{wasysym}
\usepackage{import}

\titlespacing*{\chapter}{0pt}{-2cm}{0.5cm}
\titleformat{\chapter}[display]
{\normalfont\bfseries}{}{0pt}{\Huge}

% -------------------------------------------------------------------------------
% Custom macro to make an un-numbered footnote.

\newcommand\blfootnote[1]{
    \begingroup
    \renewcommand\thefootnote{}\footnote{#1}
    \addtocounter{footnote}{-1}
    \endgroup
}

% -------------------------------------------------------------------------------
% Fancy headers; used to show my name, BCU logo and current chapter for the page.
\usepackage{fancyhdr}
\usepackage{calc}
\pagestyle{fancy}

\setlength\headheight{37pt} % Set custom header height to fit the image.

\renewcommand{\chaptermark}[1]{%
    \markboth{#1}{}} % Include chapter name.


% Lewis Higgins - ID 22133848           [BCU LOGO]                [CHAPTER NAME]
\lhead{Lewis Higgins - ID 22133848~~~~~~~~~~~~~~~\includegraphics[width=1.75cm]{BCU}}
\fancyhead[R]{\leftmark}

% ------------------------------------------------------------------------------
% Used to add PDF hyperlinks for figures and the contents page.

\usepackage{hyperref}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,
    urlcolor=blue,
    citecolor=black,
}

% ------------------------------------------------------------------------------
\usepackage{xcolor} 
\usepackage{colortbl}
\usepackage{longtable}
\usepackage{amssymb}
% ------------------------------------------------------------------------------
\usepackage{tcolorbox}
\newcommand{\para}{\vspace{7pt}\noindent}
% -------------------------------------------------------------------------------

\title{IOThings Application Report}
\author{Lewis Higgins - Student ID 22133848}
\date{May 2025}

% -------------------------------------------------------------------------------

\begin{document}


\makeatletter
\begin{titlepage}
    \begin{center}
        \includegraphics[width=0.7\linewidth]{BCU}\\[4ex]
        {\huge \bfseries CMP6207 - Assignment 1}\\[2ex]
        {\large \bfseries  \@title}\\[50ex]
        {\@author}\\[2ex]
        {CMP6207 - Modern Data Stores}\\[2ex]
        {Module Coordinator: Konstantinos Vlachos}\\[5ex]
    \end{center}
\end{titlepage}
\makeatother
\thispagestyle{empty}
\newpage


% Page counter trick so that the contents page doesn't increment it.
\setcounter{page}{0}

\tableofcontents
\thispagestyle{empty}

\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}
The report will be based on the design and implementation of a MongoDB NoSQL database system 
for the company "IoThings Home Automation Solutions". There are two assignments in this module, where this report is
worth \textbf{60\%}, and a presentation is the remaining \textbf{40\%}. This module 
will also incorporate elements of web design, with HTML and CSS also playing a role alongside the primary 
use of JavaScript.

\begin{itemize}
    \item Konstas cares more for the functionality over aesthetics. While you should put effort into 
    the HTML and CSS parts, they're a lesser concern than the overall usability of the system.
    \item A literature review is expected in this report.
    \item 4,000 word count, so 4,400 hard limit.
    \item The presentation is about this report. It must cover the design, implementation and data management.
    \begin{itemize}
        \item You would show him your database cluster (local or Atlas?) as part of it.
    \end{itemize}
    \item IT WILL BE THIRTY MINUTES. If the report contains all the screenshots (which it will) you might not need 
    to make slides, though consider it anyway. You can still show the report alongside the slides where needed.
    \item He wants you to make an Atlas account even if you do it locally.
    \item You are creating the dataset for this assignment. You will describe it in an appendix rather than 
    the report's main body.
    \item This is a "professional report", and as such the title page with the BCU logo and your info should 
    probably change. It needs to also show the date.
\end{itemize}

\chapter{Types of NoSQL databases}
\noindent Structured Query Language, or SQL, was developed by IBM following \textcite{coddRelationalModelData1970}'s groundbreaking 
publication in the ACM journal, with the first commercial SQL implementation being published by Oracle in 1979 \autocite{oracleHistorySQL}.
SQL powers many relational database systems even today, though the problems associated with its age, most notably in 
the speed of its operations, are beginning to show in modern systems. Therefore, NoSQL ("Not Only SQL") was developed as 
an extension of SQL, allowing data to be stored in a non-tabular, non-relational format for efficient storage of
semi-structured and unstructured data in a flexible, functional and scalable model for faster operations than standard 
relational databases in most scenarios \autocite{googlecloudWhatNoSQLDatabases, awsWhatNoSQLDatabase}. There are a wide variety of NoSQL 
database types which vary in complexity, functionality and purpose, meaning that identification of the most suitable type is paramount 
for maximum efficiency. 

% TODO: Talk about ACID:
% ?     Atomicity - A statement is fully executed or not executed at all.
% ?     Consistency - Transactions only occur in predefined ways. (Helps prevent impacts of corruption)
% ?     Isolation - Concurrent transactions don't interfere with each other.
% ?     Durability - Changes are saved, even in the event of system failure. 
% *    https://www.databricks.com/glossary/acid-transactions

\section{Document database}\label{sec:DocDBs}
% ? MongoDB is a document database.
% * General purpose databases.
Document databases are intuitive, flexible and horizontally scalable databases that work well in a wide variety of use cases
for both transactional and analytical purposes, including IoT data and real-time analytics \autocite{mongodbDocumentDatabaseNoSQL}.
They store records as "documents", which store an object's data and metadata, in a format such as JSON, BSON, or XML\footnote{JavaScript Object Notation, Binary JSON and Extensible Markup Language, respectively.}. Details and examples of these file types can be found in Appendix A.

% TODO: Finish Appendix A, where you talk about and give examples of each of these. See Lab 4 slides for modelling relationships with JSON.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\textwidth]{NoSQL DBs/Doc/ExampleDoc}
    \caption{An example of a JSON Document.\label{fig:ExampleDoc}}
\end{figure}

\noindent Figure \ref{fig:ExampleDoc} depicts an example JSON document in MongoDB\footnote{MongoDB actually stores data as BSON, though it translates between the two when queried.}, a popular DBMS
for document databases. It contains the data of a singular example school teacher, storing details such as their name, age and subject expertise, as well as a unique internal object ID used by MongoDB to identify that document. The data itself is of varying types including 
strings, integers and arrays, which makes document databases easily integrable into a development workflow due to the direct 
storage of object types used in programming languages like Python and JavaScript.

% TODO: Has enough been written here?

\para Popular services for document databases include Databricks \autocite{databricksDataAICompany2023} Couchbase \autocite{couchbaseCouchbaseBestFree}, and the previously mentioned MongoDB \autocite{mongodbDocumentDatabaseNoSQL}.


\section{Key-value database}
% ? Redis is a key-value database.
% ! While that's true, it's also an in-memory database.
% * Very fast, very simple.
Key-value databases are primarily reputed for their speed and simplicity, functioning by storing each record as a key-value pair.
Rather than having to search through massive amounts of irrelevant data for a query, key-value databases can instead search 
through their stored keys to retrieve results within milliseconds or even microseconds if used in-memory \autocite{redisRedisFAQ}.
While this is excellent for simple queries to retrieve specific known records, this same property also causes major limitations in
that retrieving data based on values, such as finding all users over a given age, would require the entire database to be searched,
making key-value databases best suited for real-time data access and caching where simpler queries are used \autocite{mongodbWhatKeyValueDatabase}.

% TODO: You've spoke of key-value negatives here, so go back and do it for documents too.
% TODO: Some kind of image for key-value sample data.
% TODO: What's the difference between key-value and document?

\para Notable software options used across industry for key-value databases include Amazon's DynamoDB \autocite{awsFastNoSQLKeyValue} and Redis \autocite{redisWhatKeyValueDatabase}. 


\section{Column-oriented database}
% * Stores data in columns rather than rows.
% * Fast reading, slow writing. 
% * Better for OLAP than OLTP iirc.
% ! In the scenario, the slow writing means it's unwanted. Client wants IoT sensor data recorded, so it'll be lots of writing.
% ? Also known as wide-column stores, which may be the preferred term for the module spec.


\section{Graph database}
% ? Neo4J is a graph database.




\chapter{Comparing NoSQL and Relational databases} 
% ! Chapter title doesn't fit the page.
\begin{itemize}
    \item This section "shouldn't be too long, but enough to convince them."
    \item \textbf{This is NOT comparing \textit{MongoDB} to relational databases.} The brief 
    mentions that it should be "generic just in case after seeing your MongoDB database
    they decide to go with another software provider."
\end{itemize}


% ! If possible, keep work up to this point under ~2500 words perhaps.
% ! The hard limit is 4,400.

% Assuming this is probably the longest chapter.
\include{Body/Database}
% ! I want to be up to this point by Feb 28th.

\chapter{API Implementation and Documentation}


\chapter*{Conclusion}
\addcontentsline{toc}{chapter}{Conclusion}
% ! I want to be done with this report by April 14th, with the 
% ! April 29 - May 4 window being for final improvements, presentation prep, and other assignments.

Overall, something was done\dots



% ? Prevents bibliography overflowing hbox at the expense of it taking up more lines on the page.
\emergencystretch=1em

\printbibliography
\addcontentsline{toc}{chapter}{Bibliography}


\include{Body/AppendixA}


\end{document}